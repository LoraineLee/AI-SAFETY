---
title: Telemetry
description: Using OpenTelemetry with AI SDK Core
---

# Telemetry

<Note type="warning">
  This feature is experimental and may change in the future. Currently, only the
  `generateText` and `streamText` functions support telemetry.
</Note>

The Vercel AI SDK uses [OpenTelemetry](https://opentelemetry.io/) to collect telemetry data.
OpenTelemetry is an open-source observability framework designed to provide
standardized instrumentation for collecting telemetry data.

## Enabling telemetry

For Next.js applications, please follow the [Next.js OpenTelemetry guide](https://nextjs.org/docs/app/building-your-application/optimizing/open-telemetry) to enable telemetry first.

You can then use the `experimental_telemetry` option to enable telemetry on specific function calls while
the feature is experimental:

```ts highlight="4"
const result = await generateText({
  model: openai('gpt-4-turbo'),
  prompt: 'Write a short story about a cat.',
  experimental_telemetry: { isEnabled: true },
});
```

## Telemetry Metadata

You can provide a `functionId` to identify the function that the telemetry data is for,
and `metadata` to include additional information in the telemetry data.

```ts highlight="6-10"
const result = await generateText({
  model: openai('gpt-4-turbo'),
  prompt: 'Write a short story about a cat.',
  experimental_telemetry: {
    isEnabled: true,
    functionId: 'my-awesome-function',
    metadata: {
      something: 'custom',
      someOtherThing: 'other-value',
    },
  },
});
```

## Collected Data

### generateText

`generateText` records 3 types of spans:

- `ai.generateText`: the full length of the generateText call. It contains 1 or more `ai.generateText.doGenerate` spans.
- `ai.generateText.doGenerate`: a provider doGenerate call. It can contain `ai.toolCall` spans.
- `ai.toolCall`: a tool call that is made as part of the generateText call. It contains the following attributes:
  - `ai.toolCall.name`: the name of the tool
  - `ai.toolCall.id`: the id of the tool call
  - `ai.toolCall.args`: the parameters of the tool call
  - `ai.toolCall.result`: the result of the tool call. Only available if the tool call is successful and the result is serializable.

### streamText

`streamText` records 3 types of spans:

- `ai.streamText`: the full length of the streamText call. It contains a `ai.streamText.doStream` span.
- `ai.streamText.doStream`: a provider doStream call.
  This span contains an `ai.stream.firstChunk` event that is emitted when the first chunk of the stream is received.
  The `doStream` span can also contain `ai.toolCall` spans.
- `ai.toolCall`: a tool call that is made as part of the generateText call. It contains the following attributes:
  - `ai.toolCall.name`: the name of the tool
  - `ai.toolCall.id`: the id of the tool call
  - `ai.toolCall.args`: the parameters of the tool call
  - `ai.toolCall.result`: the result of the tool call. Only available if the tool call is successful and the result is serializable.
